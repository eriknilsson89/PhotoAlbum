<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class TDbUser</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class TDbUser</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">TDbUser class</p>
<p class="description"><p>TDbUser is the base user class for using together with <a href="../System.Security/TDbUserManager.html">TDbUserManager</a>.  Two methods are declared and must be implemented in the descendant classes: <ul><li><a href="../System.Security/TDbUser.html#methodvalidateUser">validateUser()</a>: validates if username and password are correct entries.</li><li><a href="../System.Security/TDbUser.html#methodcreateUser">createUser()</a>: creates a new user instance given the username</li></ul></p></p>
	<ul class="tags">
				<li><span class="field">abstract:</span> </li>
				<li><span class="field">since:</span> 3.1.0</li>
				<li><span class="field">version:</span> $Id: TDbUserManager.php 2541 2008-10-21 15:05:13Z qiang.xue $</li>
				<li><span class="field">author:</span> Qiang Xue &lt;<a href="mailto:qiang.xue@gmail.com">qiang.xue@gmail.com</a>&gt;</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_Security_TDbUserManager_php.html">/Security/TDbUserManager.php</a> (line <span class="field">223</span>)
		</p>
		
				
		<pre><a href="../System/TComponent.html">TComponent</a>
   |
   --<a href="../System.Security/TUser.html">TUser</a>
      |
      --TDbUser</pre>
	
			</div>
</div>




	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
												<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
								
				<div class="method-definition">
											<span class="method-result"><a href="../System.Security/TDbUser.html">TDbUser</a></span>
										<a href="#createUser" title="details" class="method-name">createUser</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$username</span>)
									</div>
								
				<div class="method-definition">
											<span class="method-result"><a href="../System.Security/TDbUser.html">TDbUser</a></span>
										<a href="#createUserFromCookie" title="details" class="method-name">createUserFromCookie</a>
											(<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>&nbsp;<span class="var-name">$cookie</span>)
									</div>
								
				<div class="method-definition">
											<span class="method-result"><a href="../System.Data/TDbConnection.html">TDbConnection</a></span>
										<a href="#getDbConnection" title="details" class="method-name">getDbConnection</a>
										()
									</div>
								
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#saveUserToCookie" title="details" class="method-name">saveUserToCookie</a>
											(<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>&nbsp;<span class="var-name">$cookie</span>)
									</div>
								
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#validateUser" title="details" class="method-name">validateUser</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$username</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$password</span>)
									</div>
							</div>
		</div>
	</div>		

	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodcreateUser" id="createUser"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">createUser</span> (line <span class="line-number">278</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Creates a new user instance given the username.</p>
<p class="description"><p>This method usually needs to retrieve necessary user information  (e.g. role, name, rank, etc.) from the user database according to  the specified username. The newly created user instance should be  initialized with these information.</p><p>If the username is invalid (not found in the user database), null  should be returned.</p><p>You may use <a href="../System.Security/TDbUser.html#methodgetDbConnection">DbConnection</a> to deal with database.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> the newly created and initialized user instance</li>
				<li><span class="field">access:</span> public</li>
				<li><span class="field">abstract:</span> </li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result"><a href="../System.Security/TDbUser.html">TDbUser</a></span>
		<span class="method-name">
			createUser
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$username</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$username</span><span class="var-description">: username (case-sensitive)</span>			</li>
				</ul>
		
		
	</div>
<a name="methodcreateUserFromCookie" id="createUserFromCookie"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">createUserFromCookie</span> (line <span class="line-number">296</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Creates a new user instance given the cookie containing auth data.</p>
<p class="description"><p>This method is invoked when TAuthManager::setAllowAutoLogin is set true.  The default implementation simply returns null, meaning no user instance can be created  from the given cookie.</p><p>If you want to support automatic login (remember login), you should override this method.  Typically, you obtain the username and a unique token from the cookie's value.  You then verify the token is valid and use the username to create a user instance.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> the user instance generated based on the cookie auth data, null if the cookie does not have valid auth data.</li>
				<li><span class="field">access:</span> public</li>
				<li><span class="field">since:</span> 3.1.1</li>
				<li><span class="field">see:</span> <a href="../System.Security/TDbUser.html#methodsaveUserToCookie">TDbUser::saveUserToCookie()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result"><a href="../System.Security/TDbUser.html">TDbUser</a></span>
		<span class="method-name">
			createUserFromCookie
		</span>
					(<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>&nbsp;<span class="var-name">$cookie</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>
				<span class="var-name">$cookie</span><span class="var-description">: the cookie storing user authentication information</span>			</li>
				</ul>
		
		
	</div>
<a name="methodgetDbConnection" id="getDbConnection"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">getDbConnection</span> (line <span class="line-number">232</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns a database connection that may be used to retrieve data from database.</p>
	<ul class="tags">
				<li><span class="field">return:</span> database connection that may be used to retrieve data from database</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result"><a href="../System.Data/TDbConnection.html">TDbConnection</a></span>
		<span class="method-name">
			getDbConnection
		</span>
				()
			</div>
	
		
		
	</div>
<a name="methodsaveUserToCookie" id="saveUserToCookie"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">saveUserToCookie</span> (line <span class="line-number">316</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Saves necessary auth data into a cookie.</p>
<p class="description"><p>This method is invoked when TAuthManager::rememberLogin is invoked.  The default implementation does nothing, meaning auth data is not stored in the cookie  (and thus automatic login is not supported.)</p><p>If you want to support automatic login (remember login), you should override this method.  Typically, you generate a unique token according to the current login information  and save it together with the username in the cookie's value.  You should avoid revealing the password in the generated token.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
				<li><span class="field">since:</span> 3.1.1</li>
				<li><span class="field">see:</span> <a href="../System.Security/TDbUser.html#methodcreateUserFromCookie">TDbUser::createUserFromCookie()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			saveUserToCookie
		</span>
					(<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>&nbsp;<span class="var-name">$cookie</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"><a href="../System.Web/THttpCookie.html">THttpCookie</a></span>
				<span class="var-name">$cookie</span><span class="var-description">: the cookie to store the user auth information</span>			</li>
				</ul>
		
		
	</div>
<a name="methodvalidateUser" id="validateUser"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">validateUser</span> (line <span class="line-number">261</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Validates if username and password are correct entries.</p>
<p class="description"><p>Usually, this is accomplished by checking if the user database  contains this (username, password) pair.  You may use <a href="../System.Security/TDbUser.html#methodgetDbConnection">DbConnection</a> to deal with database.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> whether the validation succeeds</li>
				<li><span class="field">access:</span> public</li>
				<li><span class="field">abstract:</span> </li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			validateUser
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$username</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$password</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$username</span><span class="var-description">: username (case-sensitive)</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$password</span><span class="var-description">: password</span>			</li>
				</ul>
		
		
	</div>
							<h4>Inherited Methods</h4>
				<a name='inherited_methods'><!-- --></a>	
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../System.Security/TUser.html">TUser</a></span></p>
					<blockquote>
													<span class="method-name"><a href="../System.Security/TUser.html#method__construct">TUser::__construct()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetIsGuest">TUser::getIsGuest()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetManager">TUser::getManager()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetName">TUser::getName()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetRoles">TUser::getRoles()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetState">TUser::getState()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodgetStateChanged">TUser::getStateChanged()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodisInRole">TUser::isInRole()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodloadFromString">TUser::loadFromString()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsaveToString">TUser::saveToString()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsetIsGuest">TUser::setIsGuest()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsetName">TUser::setName()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsetRoles">TUser::setRoles()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsetState">TUser::setState()</a></span><br>
													<span class="method-name"><a href="../System.Security/TUser.html#methodsetStateChanged">TUser::setStateChanged()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../System/TComponent.html">TComponent</a></span></p>
					<blockquote>
													<span class="method-name"><a href="../System/TComponent.html#methodaddParsedObject">TComponent::addParsedObject()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodattachEventHandler">TComponent::attachEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcanGetProperty">TComponent::canGetProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcanSetProperty">TComponent::canSetProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcreatedOnTemplate">TComponent::createdOnTemplate()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methoddetachEventHandler">TComponent::detachEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodevaluateExpression">TComponent::evaluateExpression()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodevaluateStatements">TComponent::evaluateStatements()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodgetEventHandlers">TComponent::getEventHandlers()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodgetSubProperty">TComponent::getSubProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasEvent">TComponent::hasEvent()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasEventHandler">TComponent::hasEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasProperty">TComponent::hasProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodraiseEvent">TComponent::raiseEvent()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodsetSubProperty">TComponent::setSubProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__get">TComponent::__get()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__set">TComponent::__set()</a></span><br>
											</blockquote>
										
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Sun, 24 Jul 2011 21:14:03 +0200 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC4</a>
	</p>
	</div></body>
</html>